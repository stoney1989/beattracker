package ch.fhnw.tvver;

import java.io.File;
import java.io.IOException;
import java.util.EnumSet;

import javax.sound.sampled.UnsupportedAudioFileException;

import org.jtransforms.fft.FloatFFT_1D;

public class BetterFFTBeatDetection extends AbstractBeatTracker {
	
	
	final static int BUFFER_SIZE = 1024;	
	
	private float[] buffer; 
	
	
	public BetterFFTBeatDetection(File track)throws UnsupportedAudioFileException, IOException {
		super(track, EnumSet.of(Flags.REPORT));		
		buffer = new float[ BUFFER_SIZE ];	
	}
	
	
	
	
	
	@Override
	public void run() {
		
	
		
		try {
			while( getSamples(buffer) ){			
				
				FloatFFT_1D fft_do = new FloatFFT_1D(BUFFER_SIZE);
				float[] fft = new float[BUFFER_SIZE * 2];
				System.arraycopy(buffer, 0, fft, 0, BUFFER_SIZE);
				fft_do.complexForward( fft );				
		
			
				
				
				
			}
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

	}
	
	
	
	

}
